@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap');
@import url('./tokens.css');

/* Base reset + typography (token-only values) */

* {
  box-sizing: border-box;
}

html, body {
  margin: 0;
  padding: 0;
  background: var(--color-bg-page);
  color: var(--color-text);
  font-family: var(--font-family-sans);
  line-height: var(--line-height-normal);
  -webkit-font-smoothing: antialiased;
}

html {
  scroll-behavior: smooth;
}

a {
  color: var(--color-brand-accent);
  text-decoration: none;
}

  a:hover {
    color: var(--color-brand-accent-strong);
  }

  a:focus-visible {
    outline: var(--border-thick) solid var(--state-focus-outline);
    outline-offset: 3px;
    text-decoration: underline;
  }

img {
  max-width: 100%;
  display: block;
}

button {
  font-family: inherit;
}

main {
  min-height: 80vh;
}

h1 {
  font-size: var(--font-size-h1);
  line-height: var(--line-height-tight);
  letter-spacing: 0.01em;
  margin: 0 0 var(--space-20);
  color: var(--color-text);
}

h2 {
  font-size: var(--font-size-h2);
  line-height: 1.25;
  margin: 0 0 var(--space-16);
  color: var(--color-text);
}

h3 {
  font-size: var(--font-size-h3);
  margin: 0 0 var(--space-12);
  color: var(--color-text);
}

h4 {
  font-size: var(--font-size-h4);
  margin: 0 0 var(--space-8);
}

p {
  margin: 0 0 var(--space-12);
  color: var(--color-text-muted);
}

li,
small,
span {
  color: var(--color-text);
}

:focus-visible {
    outline: var(--border-thick) solid var(--state-focus-outline);
    outline-offset: 2px;
  }

.mf-skip {
  position: absolute;
  left: -999px;
  top: -999px;
  background: var(--color-surface-200);
  color: var(--color-text-main);
  padding: var(--space-8) var(--space-12);
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-elevated);
}

.mf-skip:focus-visible {
  left: var(--space-12);
  top: var(--space-12);
  z-index: 10;
}

/* Shell layout + background gradients (tokens only) */
.mf-shell {
  /*
    Future shell background hook:
    background-image: var(--asset-section-dark);
    background-size: cover;
    background-position: center;
  */
  background: radial-gradient(circle at 20% 20%, var(--overlay-weak), transparent 40%),
    radial-gradient(circle at 80% 0%, var(--overlay-faint), transparent 35%),
    linear-gradient(180deg, var(--color-surface-0), var(--color-surface-100));
  min-height: 100vh;
}

.mf-container,
.container {
  width: min(var(--layout-main, var(--layout-max-width-main, var(--layout-max-width))), 92vw);
  margin: 0 auto;
  padding-inline: var(--space-16);
}

.section,
.mf-section {
  position: relative;
  padding: var(--section-padding-y) 0;
  background: linear-gradient(180deg, var(--bg-base), var(--panel-light));
  box-shadow: var(--shadow-section-inset);
}

.section--alt {
  background: var(--panel-light);
}

.section--mid {
  background: var(--panel-mid);
}

.band-surface {
  background: linear-gradient(180deg, var(--panel-mid), var(--panel-light));
  border-top: var(--border-thin) solid var(--panel-border);
  border-bottom: var(--border-thin) solid var(--panel-border);
}

/* Glow utilities */
.af-glow-halo {
  box-shadow: var(--glow-halo, var(--shadow-glow-strong));
}

.af-glow-frame {
  box-shadow: var(--glow-frame, var(--shadow-elevated));
  border: var(--border-regular) solid var(--panel-border);
}

.af-glow-bar {
  height: var(--space-12);
  width: 100%;
  background-image: url('../website/glow_pack_v01/halo_bar_multicolor.svg');
  background-repeat: no-repeat;
  background-size: cover;
  background-position: center;
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-glow-soft);
}

.mf-section--compact {
  padding: var(--section-padding-y-compact) 0;
}

.mf-section-header {
  margin-bottom: var(--space-24);
  max-width: calc(var(--layout-narrow, var(--layout-max-width-narrow)) * 0.65);
}

.mf-eyebrow {
  font-size: var(--text-xs);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--color-brand-accent-soft);
  margin-bottom: var(--space-8);
}

.mf-section h2 {
  font-size: var(--text-2xl);
  margin: 0 0 var(--space-12);
}

.mf-section p {
  color: var(--color-text-muted);
  margin: 0 0 var(--space-12);
}

.mf-grid {
  display: grid;
  gap: var(--space-16);
}

.mf-grid--3 {
  grid-template-columns: repeat(
    auto-fit,
    minmax(calc(var(--space-72) * 3 + var(--space-24)), 1fr)
  );
}

.mf-grid--2 {
  grid-template-columns: repeat(
    auto-fit,
    minmax(calc(var(--space-88) * 3 + var(--space-16)), 1fr)
  );
}

  .mf-card {
  /*
    Future card texture hook:
    background-image: var(--asset-card-soft);
    background-size: cover;
    background-blend-mode: screen;
  */
  background: linear-gradient(
      160deg,
      color-mix(in srgb, var(--overlay-mid) 75%, transparent),
      color-mix(in srgb, var(--overlay-faint) 95%, transparent)
    ),
    linear-gradient(180deg, var(--color-surface-100), var(--color-surface-200));
    border: var(--border-regular) solid var(--color-border-strong);
  border-radius: var(--radius-md);
  padding: var(--space-20);
  box-shadow: var(--shadow-soft);
  transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease, background 160ms ease;
  display: flex;
  flex-direction: column;
  gap: var(--space-12);
}

.mf-card[data-mode],
.mf-card[data-constraint],
.mf-mode-grid .mf-card,
.mf-constraint-list .mf-card {
  cursor: pointer;
}

.mf-card[data-mode][aria-pressed="true"],
.mf-card[data-constraint].is-active {
  border-color: var(--color-border-strong);
  box-shadow: var(--shadow-elevated);
  background: linear-gradient(
      160deg,
      color-mix(in srgb, var(--overlay-strong) 65%, transparent),
      color-mix(in srgb, var(--overlay-mid) 85%, transparent)
    ),
    linear-gradient(180deg, var(--color-surface-100), var(--color-surface-200));
}

.mf-card:hover {
  transform: translateY(calc(-1 * var(--space-4)));
  box-shadow: var(--shadow-elevated);
  border-color: var(--state-hover-border);
  background: linear-gradient(
      160deg,
      color-mix(in srgb, var(--overlay-strong) 55%, transparent),
      color-mix(in srgb, var(--overlay-mid) 80%, transparent)
    ),
    linear-gradient(180deg, var(--color-surface-100), var(--color-surface-200));
}

  .mf-card:focus-visible {
    outline: var(--border-thick) solid var(--state-focus-outline);
    outline-offset: var(--space-4);
    box-shadow: var(--shadow-elevated);
  }

.mf-card h3 {
  margin: 0 0 var(--space-12);
  font-size: var(--text-lg);
}

.mf-card p {
  margin: 0 0 var(--space-12);
}

.mf-card-footer {
  display: flex;
  align-items: center;
  gap: var(--space-8);
  margin-top: auto;
  font-size: var(--text-sm);
  color: var(--color-text-muted);
}

  .mf-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-8);
  padding: var(--space-12) var(--space-20);
  border-radius: var(--radius-sm);
  font-weight: 600;
    border: var(--border-regular) solid var(--cta-primary-border);
  cursor: pointer;
  transition: transform 120ms ease, box-shadow 160ms ease, background 160ms ease, border-color 160ms ease;
}

.mf-button:active {
  transform: translateY(0);
  box-shadow: var(--shadow-soft);
  background: linear-gradient(135deg, var(--cta-primary-pressed-bg), var(--cta-primary-strong));
}

  .mf-button:focus-visible {
    outline: var(--border-thick) solid var(--state-focus-outline);
    outline-offset: 2px;
  }

.mf-button--primary {
  background: linear-gradient(135deg, var(--cta-primary-bg), var(--cta-primary-strong));
  color: var(--cta-primary-text);
  box-shadow: var(--shadow-soft);
}

.mf-button--primary:hover {
  transform: translateY(calc(-1 * var(--space-2)));
  box-shadow: var(--shadow-card);
  background: linear-gradient(135deg, var(--cta-primary-hover-bg), var(--cta-primary-strong));
}

.mf-button--ghost {
  color: var(--cta-ghost-text);
  border: var(--cta-ghost-border);
  background: transparent;
}

.mf-button--ghost:hover {
  border-color: var(--cta-ghost-hover-border);
  background: var(--cta-ghost-hover-surface);
  transform: translateY(calc(-1 * var(--space-2)));
}

.mf-button--secondary {
  color: var(--color-text-main);
  background: linear-gradient(135deg, var(--color-surface-200), var(--color-surface-300));
    border: var(--border-regular) solid var(--color-border-subtle);
  box-shadow: var(--shadow-soft);
}

.mf-button--secondary:hover {
  border-color: var(--state-hover-border);
  transform: translateY(calc(-1 * var(--space-2)));
}

.mf-button:disabled,
.mf-button[aria-disabled="true"] {
  cursor: not-allowed;
  color: var(--state-disabled-foreground);
  background: var(--state-disabled-surface);
  border-color: var(--state-disabled-surface);
  box-shadow: var(--shadow-none);
}

.mf-chip {
  display: inline-flex;
  align-items: center;
  padding: calc(var(--space-8) - var(--space-2)) var(--space-12);
  border-radius: var(--radius-sm);
  background: var(--state-hover-surface);
  border: var(--border-regular) solid var(--color-border-strong);
  font-size: var(--text-xs);
  color: var(--color-text-main);
  font-weight: 600;
  line-height: 1.25;
}

.mf-chip img {
  height: 1.25em;
  width: auto;
}

.mf-meta {
  font-size: var(--text-sm);
  color: var(--color-text-muted);
  margin: 0;
}

.mf-tag-row {
  display: flex;
  gap: var(--space-8);
  flex-wrap: wrap;
}

/* Home hero scaffold (glow utilities + token spacing) */
.mf-hero {
  position: relative;
  padding: var(--space-64) 0;
  overflow: hidden;
}

.mf-hero::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 20% 20%, var(--overlay-weak), transparent 35%),
    radial-gradient(circle at 70% 0%, var(--overlay-weak), transparent 30%);
  pointer-events: none;
}

.mf-hero-inner {
  position: relative;
  display: grid;
  gap: var(--space-32);
  grid-template-columns: repeat(
    auto-fit,
    minmax(calc(var(--space-88) * 3 + var(--space-16)), 1fr)
  );
  align-items: center;
  max-width: var(--layout-narrow, var(--layout-max-width-narrow));
}

.mf-hero h1 {
  font-size: var(--text-4xl);
  margin: 0 0 var(--space-12);
}

.mf-hero p {
  color: var(--color-text-muted);
  margin: 0 0 var(--space-12);
  max-width: calc(var(--layout-narrow, var(--layout-max-width-narrow)) * 0.58);
}

.mf-hero-actions {
  display: flex;
  gap: var(--space-12);
  flex-wrap: wrap;
  margin-top: var(--space-20);
}

.mf-hero-visual {
  background: linear-gradient(
      150deg,
      color-mix(in srgb, var(--overlay-mid) 80%, transparent),
      color-mix(in srgb, var(--overlay-faint) 90%, transparent)
    ),
    linear-gradient(185deg, var(--color-surface-100), var(--color-surface-200));
  border-radius: var(--radius-md);
  padding: var(--space-20);
  border: var(--border-regular) solid var(--color-border-strong);
  box-shadow: var(--shadow-elevated);
  min-height: calc(var(--space-72) + var(--space-64) + var(--space-40));
}

.mf-hero-visual h2 {
  font-size: var(--text-xl);
}

.mf-brand-strip {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(calc(var(--space-72) * 2 + var(--space-16)), 1fr));
  gap: var(--space-12);
}

.af-card-frame,
.mf-card,
.mf-brand-tile,
.mf-stack-diagram,
.mf-storyboard,
.mf-storyboard-item,
.mf-gallery,
.mf-case-studies,
.mf-templates,
.mf-modes,
.mf-showcase,
.mf-flow-panel,
.mf-flow-panel .mf-flow-track,
.mf-map-panel,
.mf-map-layer,
.mf-constraints,
.mf-intelligence,
.mf-diagram-frame,
.mf-stack-diagram .mf-layer,
.mf-snapshot,
.mf-task,
.mf-shell-pane,
.mf-shell-sidebar {
  border: var(--border-regular) solid var(--color-border-strong);
  border-radius: var(--radius-md);
  padding: var(--space-16);
  box-shadow: var(--shadow-soft);
}

.af-card-frame,
.mf-card,
.mf-brand-tile,
.mf-storyboard-item,
.mf-stack-diagram .mf-layer,
.mf-snapshot,
.mf-task {
  background: linear-gradient(
      150deg,
      color-mix(in srgb, var(--overlay-mid) 70%, transparent),
      color-mix(in srgb, var(--overlay-faint) 90%, transparent)
    ),
    var(--color-surface-200);
}

.mf-brand-tile {
  text-align: center;
}

.mf-stack-diagram,
.mf-storyboard,
.mf-gallery,
.mf-case-studies,
.mf-templates,
.mf-modes,
.mf-showcase,
.mf-flow-panel,
.mf-map-panel,
.mf-constraints,
.mf-intelligence {
  background: linear-gradient(180deg, var(--color-surface-100), var(--color-surface-200));
}

.mf-diagram-frame {
  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--color-brand-accent) 16%, transparent),
    color-mix(in srgb, var(--overlay-faint) 90%, transparent)
  );
  padding: var(--space-20);
}

.mf-brand-tile span {
  display: block;
  margin-top: var(--space-8);
}



.mf-stack-diagram .mf-grid {
  grid-template-columns: repeat(
    auto-fit,
    minmax(calc(var(--space-88) * 2 + var(--space-24)), 1fr)
  );
}

.mf-list-inline {
  display: flex;
  gap: var(--space-12);
  flex-wrap: wrap;
  padding: 0;
  margin: 0;
  list-style: none;
}

.mf-skeleton {
  position: relative;
  overflow: hidden;
  background: var(--overlay-weak);
  border-radius: var(--radius-sm);
}

.mf-skeleton::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    color-mix(in srgb, var(--overlay-weak) 70%, transparent),
    color-mix(in srgb, var(--overlay-mid) 90%, transparent),
    color-mix(in srgb, var(--overlay-weak) 70%, transparent)
  );
  animation: mf-shimmer 1.4s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .mf-skeleton::after {
    animation: none;
  }
}

@keyframes mf-shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

  .mf-skeleton--text {
    height: var(--space-12);
    margin: calc(var(--space-4) + var(--space-2)) 0;
  }

  .mf-skeleton--block {
    height: calc(var(--space-72) + var(--space-64) + var(--space-4));
  }

  /* Utility surfaces and framing */
  .af-surface-elevated {
    background: linear-gradient(180deg, var(--color-surface-100), var(--color-surface-200));
    border: var(--border-regular) solid var(--color-border-subtle);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-soft);
  }

  .af-surface-subtle {
    background: var(--color-surface-100);
    border: var(--border-thin) solid var(--color-border-subtle);
    border-radius: var(--radius-sm);
    box-shadow: var(--shadow-none);
  }

  .af-hero-gradient-af,
  .mf-hero--forge {
    background:
      radial-gradient(
        circle at 30% 30%,
        color-mix(in srgb, var(--color-brand-af-pink) 22%, transparent),
        transparent 48%
      ),
      radial-gradient(
        circle at 70% 20%,
        color-mix(in srgb, var(--overlay-weak) 70%, transparent),
        transparent 65%
      ),
      linear-gradient(180deg, var(--color-surface-0), var(--color-surface-100));
  }

  .af-hero-gradient-av,
  .mf-hero--atlasv {
    background:
      radial-gradient(
        circle at 70% 25%,
        color-mix(in srgb, var(--color-brand-av-cyan) 22%, transparent),
        transparent 48%
      ),
      radial-gradient(
        circle at 32% 18%,
        color-mix(in srgb, var(--overlay-weak) 70%, transparent),
        transparent 62%
      ),
      linear-gradient(180deg, var(--color-surface-0), var(--color-surface-100));
  }

  .af-hero-gradient-as,
  .mf-hero--studio {
    background:
      radial-gradient(
        circle at 78% 24%,
        color-mix(in srgb, var(--color-brand-as-amber) 24%, transparent),
        transparent 44%
      ),
      radial-gradient(
        circle at 24% 26%,
        color-mix(in srgb, var(--overlay-weak) 70%, transparent),
        transparent 62%
      ),
      linear-gradient(180deg, var(--color-surface-0), var(--color-surface-100));
  }

  .af-hero-gradient-oia,
  .mf-hero--oia {
    background:
      radial-gradient(
        circle at 70% 30%,
        color-mix(in srgb, var(--color-brand-oia) 24%, transparent),
        transparent 46%
      ),
      radial-gradient(
        circle at 24% 36%,
        color-mix(in srgb, var(--overlay-weak) 70%, transparent),
        transparent 64%
      ),
      linear-gradient(180deg, var(--color-surface-0), var(--color-surface-100));
  }

  .af-hero-gradient-skb,
  .mf-hero--skb {
    background:
      radial-gradient(
        circle at 25% 25%,
        color-mix(in srgb, var(--color-brand-skb) 22%, transparent),
        transparent 46%
      ),
      radial-gradient(
        circle at 66% 32%,
        color-mix(in srgb, var(--overlay-weak) 70%, transparent),
        transparent 62%
      ),
      linear-gradient(180deg, var(--color-surface-0), var(--color-surface-100));
  }

  /* Spacing stacks */
  .af-stack-md {
    display: flex;
    flex-direction: column;
    gap: var(--space-16);
  }

  .af-stack-lg {
    display: flex;
    flex-direction: column;
    gap: var(--space-24);
  }

  /* Brand glow utilities */
  .af-glow { box-shadow: 0 0 0 1px var(--panel-border), 0 10px 32px color-mix(in srgb, var(--af-glow) 35%, transparent); }
  .studio-glow { box-shadow: 0 0 0 1px var(--panel-border), 0 10px 32px color-mix(in srgb, var(--studio-glow) 35%, transparent); }
  .av-glow { box-shadow: 0 0 0 1px var(--panel-border), 0 10px 32px color-mix(in srgb, var(--av-glow) 35%, transparent); }
  .oia-glow { box-shadow: 0 0 0 1px var(--panel-border), 0 10px 32px color-mix(in srgb, var(--oia-glow) 35%, transparent); }
  .wave-glow { box-shadow: 0 0 0 1px var(--panel-border), 0 10px 32px color-mix(in srgb, var(--wave-glow) 35%, transparent); }
  .amn-glow { box-shadow: 0 0 0 1px var(--panel-border), 0 10px 32px color-mix(in srgb, var(--amn-glow) 35%, transparent); }

  .page-hero {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    align-items: center;
    gap: var(--space-24);
    padding: var(--space-48) 0;
  }

  .page-hero__logo {
    width: 96px;
    height: 96px;
    border-radius: 50%;
    background: var(--panel-light);
    display: grid;
    place-items: center;
    padding: var(--space-12);
  }

  .page-hero__lede {
    color: var(--text-muted);
    font-size: 1.05rem;
    margin-bottom: var(--space-24);
  }

  .page-hero__actions {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-12);
  }

  .brand-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: var(--space-16);
  }

  .brand-card {
    background: var(--panel-light);
    border: 1px solid var(--panel-border);
    border-radius: var(--radius-md);
    padding: var(--space-20);
    display: grid;
    gap: var(--space-12);
    min-height: 100%;
  }

  .brand-card h3 {
    margin: 0;
  }

  .brand-card p {
    margin: 0;
    color: var(--text-muted);
  }

  .af-inline-gap-md {
    display: inline-flex;
    align-items: center;
    gap: var(--space-16);
    flex-wrap: wrap;
  }

  /* Card and panel framing */
  .af-panel-frame,
  .mf-panel,
  .mf-shell-window,
  .mf-shell-pane,
  .mf-shell-sidebar {
    background: linear-gradient(180deg, var(--color-surface-100), var(--color-surface-200));
    border: var(--border-regular) solid var(--color-border-strong);
    box-shadow: var(--shadow-elevated);
  }

  .af-panel-frame {
    border-radius: var(--radius-lg);
    padding: var(--space-20);
  }

  .mf-panel,
  .mf-shell-window,
  .mf-shell-pane,
  .mf-shell-sidebar {
    border-radius: var(--radius-md);
    padding: var(--space-16);
  }

  .mf-table {
    width: 100%;
    border-collapse: collapse;
  }

  .mf-table th,
  .mf-table td {
    padding: var(--space-12);
    border-bottom: var(--border-thin) solid var(--color-border-subtle);
  }

  .mf-footer {
    padding: var(--section-padding-y-compact) 0;
    border-top: var(--border-thin) solid var(--color-border-subtle);
    margin-top: var(--space-32);
  }

  .mf-footer__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: var(--space-16);
    align-items: start;
  }

  .mf-footer__links {
    display: grid;
    gap: var(--space-8);
  }

  .mf-footer-inner {
    display: grid;
    grid-template-columns: repeat(
      auto-fit,
      minmax(calc(var(--space-88) + var(--space-72)), 1fr)
    );
    gap: var(--space-16);
    align-items: start;
  }

  .mf-footer small {
    color: var(--color-text-muted);
  }

  .mf-footer-admin-link {
    display: inline-block;
    margin-top: var(--space-8);
    color: var(--color-text-muted);
    font-size: var(--font-size-small);
  }

  .mf-nav-toggle {
    display: none;
    background: none;
    color: var(--color-text-main);
    border: var(--border-regular) solid var(--color-border-subtle);
    padding: var(--space-8) var(--space-12);
    border-radius: var(--radius-sm);
  }

@media (max-width: var(--bp-tablet)) {
  .mf-hero-inner {
    grid-template-columns: 1fr;
  }

  .mf-nav-toggle { display: inline-flex; }

  .mf-nav-group {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--color-surface-200);
    border-bottom: var(--border-regular) solid var(--color-border-subtle);
    padding: var(--space-12);
    flex-direction: column;
    gap: var(--space-12);
  }

  .mf-nav-group.is-open {
    display: flex;
  }

  .mf-nav {
    flex-direction: column;
    align-items: flex-start;
    width: 100%;
  }

  .mf-nav--secondary {
    border-left: none;
    padding-left: 0;
    border-top: var(--border-thin) solid var(--overlay-weak);
    padding-top: var(--space-8);
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
  }

  html {
    scroll-behavior: auto;
  }

  .mf-card,
  .mf-card:hover,
  .mf-storyboard-item,
  .mf-storyboard-item.is-active,
  .mf-button,
  .mf-button:hover {
    transform: none !important;
    box-shadow: var(--shadow-soft);
  }

    .mf-parallax .mf-layer-back {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--surface-800);
      border-bottom: var(--border-thin) solid var(--color-border-subtle);
      padding: var(--space-12);
      flex-direction: column;
      gap: var(--space-8);
    }
  }
