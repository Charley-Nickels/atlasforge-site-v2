<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AtlasForge Decision Console (Internal)</title>
  <link rel="stylesheet" href="/styles/main.css">
  <link rel="stylesheet" href="/styles/admin.css">
</head>
<body>
  <div class="admin-topbar" aria-label="AtlasForge Decision Console">
    <div class="admin-topbar__icon" aria-hidden="true">ðŸ”’</div>
    <div class="admin-topbar__text">
      <div class="admin-topbar__title">AtlasForge Decision Console</div>
      <div class="admin-topbar__subtitle">Internal decision blocks â€” changes are stored in this browser only.</div>
    </div>
  </div>
  <main class="page-shell">
    <header class="header">
      <h1>AtlasForge Decision Console (Internal)</h1>
      <p>Load decision blocks, capture choices, and export JSON for ChatGPT.</p>
    </header>

    <section class="card" id="admin-gate">
      <div class="lock-card">
        <label for="admin-code">Enter admin code to access the decision console.</label>
        <input type="password" id="admin-code" placeholder="Admin code" autocomplete="off">
        <button class="btn" id="unlock-btn" type="button">Unlock</button>
      </div>
      <p class="meta-line">This console is not visible in site navigation.</p>
      <div class="status-message" id="gate-status"></div>
    </section>

    <section id="console" class="hidden">
      <section class="card goblin-card hidden" id="goblin-sequence" aria-live="polite" aria-label="Goblin mode initialization">
        <h2>Goblin Mode Initialization</h2>
        <p class="meta-line">Running a playful setup sequence before loading the console.</p>
        <div id="goblin-log" class="goblin-log"></div>
      </section>

      <div id="console-body" class="hidden">
        <section class="card directions-card" aria-labelledby="human-directions-title">
          <h2 id="human-directions-title">How to use this console (for Human)</h2>
          <ol class="directions-list">
            <li><strong>Review each block.</strong> Expand decision blocks one by one. Read the labels and descriptions to understand each choice.</li>
            <li><strong>Make selections.</strong> Choose an option for every item. If unsure, pick the closest fit and refine later.</li>
            <li><strong>Save progress (optional).</strong> Your choices stay in this browser. You can return on this device without losing them.</li>
            <li><strong>Export decisions as JSON.</strong> Use <em>Export JSON</em> to view the export or <em>Download JSON</em> to save it locally.</li>
            <li><strong>Send the JSON to the Master Architect.</strong> In your current chat with the Master Architect (ChatGPT, Copilot, etc.), paste the JSON in a code block or upload the file. Note that it is the latest export from the AtlasForge Decision Console.</li>
            <li><strong>Wait for instructions.</strong> The Master Architect will review the JSON and share next steps (canon resolution, content updates, or workflow design).</li>
          </ol>
          <p class="meta-line">This page does not commit changes automatically. Decisions become canon only after the Master Architect processes your JSON export.</p>
        </section>

        <section class="card" id="meta-card">
          <h2>Decision Blocks</h2>
          <p class="meta-line" id="meta-phase"></p>
          <p class="meta-line" id="meta-description"></p>
          <div class="status-message" id="console-status" role="status" aria-live="polite"></div>
        </section>

        <div id="blocks-container"></div>

        <section class="card export-card">
          <h2>Export Decisions</h2>
          <p class="block-description">Export the current selections as JSON for Basil/ChatGPT.</p>
          <div class="export-actions">
            <button class="btn" id="export-btn" type="button">Export Decisions JSON</button>
            <button class="btn btn-secondary" id="download-btn" type="button">Download JSON</button>
          </div>
          <textarea id="export-output" aria-label="Exported decisions" placeholder="Your exported JSON will appear here." readonly></textarea>
        </section>
      </div>
    </section>
  </main>

  <script src="/scripts/admin-decisions.js"></script>
</body>
</html>
